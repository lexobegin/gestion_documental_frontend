<div class="page">
  <div class="bg-pattern" aria-hidden="true"></div>

  <div class="card">
    <div class="brand">
      <svg class="logo" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true">
        <path d="M11 2h2v6h6v2h-6v6h-2v-6H5V8h6z"></path>
      </svg>
      <div class="title">
        <h1>Historial MÃ©dico</h1>
        <p>Ingreso seguro para profesionales y pacientes</p>
      </div>
    </div>

    <h2>Iniciar sesiÃ³n</h2>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Email -->
      <div class="field" [class.invalid]="isInvalid('email')">
        <span class="icon" aria-hidden="true">ğŸ“§</span>
        <input
          type="email"
          id="email"
          formControlName="email"
          required
          placeholder=" "
          autocomplete="username"
          (blur)="markTouched('email')"
        />
        <label for="email">Correo electrÃ³nico</label>
        <small class="error" *ngIf="showError('email','email')">Ingresa un correo vÃ¡lido</small>
        <small class="error" *ngIf="showError('email','required')">El correo es obligatorio</small>
      </div>

      <!-- Password -->
      <div class="field" [class.invalid]="isInvalid('password')">
        <span class="icon" aria-hidden="true">ğŸ”’</span>
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          formControlName="password"
          required
          placeholder=" "
          autocomplete="current-password"
          (blur)="markTouched('password')"
        />
        <label for="password">ContraseÃ±a</label>

        <button
          type="button"
          class="ghost-toggle"
          (click)="togglePassword()"
          [attr.aria-pressed]="showPassword"
          aria-label="Mostrar u ocultar contraseÃ±a"
        >
          {{ showPassword ? 'Ocultar' : 'Mostrar' }}
        </button>

        <small class="error" *ngIf="showError('password','required')">La contraseÃ±a es obligatoria</small>
      </div>

      <div class="row">
        <label class="checkbox">
          <input type="checkbox" formControlName="remember" />
          <span>Recordarme</span>
        </label>
        <a class="link" routerLink="/recuperar">Â¿Olvidaste tu contraseÃ±a?</a>
      </div>

      <button class="submit" type="submit" [disabled]="loading || !loginForm.valid">
        <span *ngIf="!loading">Iniciar sesiÃ³n</span>
        <span *ngIf="loading" class="spinner" aria-live="polite">Ingresandoâ€¦</span>
      </button>

      <p *ngIf="errorMessage" class="server-error" role="alert">{{ errorMessage }}</p>
    </form>

    <div class="meta">
      <p>Â¿No tienes cuenta? <a class="link" routerLink="/registro">Crear una</a></p>
    </div>
  </div>
</div>
