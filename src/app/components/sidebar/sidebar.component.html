<div class="sidebar" role="navigation" aria-label="Menú lateral">
  <ul class="sidebar-menu">
    <li *ngFor="let menu of menus">
      <!-- Elemento sin submenús -->
      <ng-container *ngIf="!menu.children?.length; else hasChildren">
        <a
          [routerLink]="menu.route"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          {{ menu.title }}
        </a>
      </ng-container>

      <!-- Elemento con submenús -->
      <ng-template #hasChildren>
        <button
          class="menu-toggle"
          type="button"
          (click)="toggleMenu(menu)"
          [attr.aria-expanded]="menu.expanded"
        >
          {{ menu.title }}
          <span [ngClass]="{ expanded: menu.expanded }">▼</span>
        </button>

        <ul class="submenu" [ngClass]="{ open: menu.expanded }">
          <li *ngFor="let child of menu.children">
            <a
              [routerLink]="child.route"
              routerLinkActive="active"
            >
              {{ child.title }}
            </a>
          </li>
        </ul>
      </ng-template>
    </li>
  </ul>
</div>
